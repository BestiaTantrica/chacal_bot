# üìú PROTOCOLO DE SUPERVIVENCIA "CHACAL" - REGLAS DE ORO

**ESTE DOCUMENTO ES DE LECTURA OBLIGATORIA PARA EL AGENTE ANTES DE CUALQUIER COMANDO.**

## 1. RESTRICCIONES DE HARDWARE (AWS t2.micro)

- **CONTENEDORES**: Siempre usar **Docker**. No correr procesos pesados nativos.
- **RAM**: 1GB (Saturada). No cargar m√°s de 120-150 d√≠as de datos 5m.
- **CPU**: 1 Core. **PROHIBIDO** usar `-j 2`. Siempre usar `-j 1`.
- **SWAP**: 4GB activos. Evitar procesos que lo saturen para no congelar la instancia (Load Average < 2.0 ideal).

## 2. REGLAS DE CONFIGURACI√ìN (CR√çTICAS)

- **HARDWARE (t2.micro)**: Limitar a 3 pares para no colapsar la RAM.
- **RESOLUCI√ìN DE CAZA (1m)**: El Hyperopt se ejecuta SIEMPRE a 1 minuto para detectar el gatillo en las Horas M√°gicas. El refinado a 5m es solo para el despliegue final.
- **ESTRATEGIA √öNICA**: Solo `ChacalPulseV4_Hyperopt`.
- **SHORTS OBLIGATORIOS**: Siempre configurar `"can_short": true`.
- **ZOMBIES**: PROHIBIDO dejar contenedores con nombres aleatorios. El despliegue siempre debe ser v√≠a `docker-compose_relevo.yml` para nombres fijos.

## 3. REGLAS DE ESTRATEGIA (CHACAL V4)

- **HORAS M√ÅGICAS**: Operar exclusivamente en las aperturas: Londres (08-10 UTC / 05-07 Local) y New York (13:30-17:30 UTC / 10:30-14:30 Local).
- **ADAPTACI√ìN**: La estrategia DEBE diferenciar entre BULL, BEAR y LATERAL mediante indicadores (ADX/RSI).
- **HYPEROPT**: Optimizar par√°metros de salida espec√≠ficos para cada uno de los 3 estados.

## 4. CICLO DE VIDA Y RECURSOS (CR√çTICO)

- **USO DE TIEMPO**:
  - **Horas M√°gicas**: Trading activo (Caza).
  - **Horas Muertas**: Apagar trading y procesar **Hyperopts moneda por moneda** hasta hallar la configuraci√≥n ganadora.
- **FINES DE SEMANA**: Reservados exclusivamente para **Pruebas y Optimizaci√≥n**. NUNCA dejar bots corriendo a lo loco.
- **PERSISTENCIA**: No dejar procesos "viviendo" sin control. Si no hay estrategia ganadora validada, el bot NO OPERA.

## 5. PROCEDIMIENTO DE HYPEROPT (EST√ÅNDAR DE ORO)

1. **Metodolog√≠a de Refinado (1m -> 5m)**:
   - **Fase 1 (Precisi√≥n)**: Uso de **Biblioteca Quir√∫rgica 1m**.
   - **Fase 2 (Refinado)**: Estabilidad en 5m. Para operar sin que nos maten las comiciones.
2. **Biblioteca Quir√∫rgica (1m Magic)**:
   - **Segmentaci√≥n**: Solo se procesan velas de 1m correspondientes a las Horas M√°gicas (+warmup).
   - **Capacidad Permanente**: Se mantendr√° un repositorio hist√≥rico de hasta **7 a√±os** en el directorio `binance_surgical`.
   - **Eficiencia**: 12 pares √ó 6 horas/d√≠a √ó 1m ‚âà 6GB de disco para una d√©cada de datos t√°cticos. Esto evita re-descargas y ahorra ancho de banda.
   - **Mantenimiento**: Cada fin de semana se "poda" la data nueva descargada para integrarla a la Biblioteca Quir√∫rgica.
3. **Fase 2: Refinamiento (5m - Francotirador)**:
   - **Objetivo**: Filtrar el ruido de 1m y confirmar entradas con mayor solidez.
   - **Datos**: Se usa **EXCLUSIVAMENTE** data de 5m filtrada por **Horas M√°gicas**.
   - **Profundidad**: 12 meses de historia (cubre distintas condiciones de mercado).
   - **Intensidad**: 1000 √©pocas.
   - **Script**: `user_data/cola_hyperopt_5m.sh`.
4. **Pares (Batall√≥n Elite - 12 Unidades)**:
   - **Selecci√≥n**: BTC, ETH, SOL, XRP, ADA, DOT, DOGE, AVAX, LINK, BNB, SUI, NEAR.
   - **Criterio**: Monedas de Tier 1/2 con correlaci√≥n real con BTC y volumen masivo para 1m. SUI y NEAR elegidas por su performance actual en el mercado.
5. **Cola de Ejecuci√≥n (Secuencial)**:
   - **Problema**: El Hyperopt de 12 monedas es inejecutable en 1GB de RAM de forma simult√°nea.
   - **Soluci√≥n**: Se usa el script `user_data/cola_hyperopt.sh` para procesar **una moneda por vez**.
   - **Persistencia**: Se lanza bajo `screen -dmS hyperopt_ELITE` para operar de forma aut√≥noma.
6. **Estructura de Datos (Biblioteca Quir√∫rgica)**:
   - **Ubicaci√≥n Nativa**: `user_data/data/binance/futures/`.
   - **Formato**: `feather` (m√°xima velocidad de lectura).
   - **Injerto**: Para que Freqtrade reconozca los datos segmentados, deben residir en la ruta nativa y estar acompa√±ados de los archivos `funding_rate.feather` y `mark.feather` originales.
7. **Persistencia y Seguridad Antizombie**:
   - **COMANDO SEGURO**: Al usar Docker para Hyperopt, es OBLIGATORIO usar `--rm` (para que el contenedor se autodestruya al terminar) y `--name` (para identificarlo si sigue corriendo).
   - **Argumentos Cr√≠ticos**: El motor usa el `datadir` por defecto si no se especifica otro, lo cual es preferible tras el "Injerto".

## 6. IDENTIDAD Y COMUNICACI√ìN

- Idioma: Castellano.
- Estilo: Full Stack Experto, Directo, Sin Fricci√≥n.
- **NO PLACEHOLDERS**: Si falta un dato, se busca o se pide. No se inventa.

---
*Misi√≥n: Recuperar el capital con disciplina y precisi√≥n.*
